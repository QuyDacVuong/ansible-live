# demo.aws_ec2.yml
plugin: amazon.aws.aws_ec2

strict: False

keyed_groups:
- key: tags.Role
  prefix: role
- key: tags.Platform
  prefix: platform

# This sets the region. If empty (the default) default this will include all regions, except possibly
# restricted ones like us-gov-west-1 and cn-north-1.
regions:
  - "{{ lookup('env', 'AWS_REGION') | default('us-east-1', true) }}"

hostnames:
  - tag:Name

allow_duplicated_hosts: False

filters:
  # get all running instances
  instance-state-name: running
  # tag:Role: ggn-cipwa

compose:
 ansible_host: instance_id
